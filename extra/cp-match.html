<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript" charset="utf-8"></script>

    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./css/starter-template.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <title>非公式マヨイガの里ダイジェスト|　絵巻一覧
        </title>

    <script src="./js/jquery.quizymemorygame.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="./css/quizymemorygame.css" />

  </head>
  <body>
      <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
      </div>
    </nav>

    <div class="container show-grid">
        <div class="starter-template">
          <p><span class="glyphicon glyphicon-grain"></span> 24時間内に千楽で起こったことをダイジェストで見れるページです。 <span class="glyphicon glyphicon-time"></span>最終更新時間:2016-03-01 03:34:06.230700</p>
        </div>

    <div class="row">
        <div class="col-md-12">
            <div id="picbox">
              <span id="boxbuttons">
                 <h2>千楽 - 賭場部屋その1 - 神経衰弱</h2>
                <span class="button">
                  <span id="counter">0</span>回目</span>
                <span class="button">
                  <a onclick="ResetGame();">リセット</a>
                </span>
              </span>
              <div id="reward"></div>
              <div id="boxcard"></div>
            </div>
        </div>
        <div class="col-md-12">
            <h2>以下の投稿画像をお借りました</h2>
            <div class="media">

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EF3V6keXUAEyqF3.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">鵺</span><a href="https://twitter.com/kibakobako/status/1179333912587378688/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">撫子</span><a href="https://twitter.com/po3515/status/1167811409624760321/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EE_d-UVU4AEgVzk.png:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">鵺</span><a href="https://twitter.com/ume_tiyoko/status/1175402132935069696/photo/3"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">撫子</span><a href="https://twitter.com/po3515/status/1167811409624760321/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EF3V6keXUAEyqF3.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">鵺</span><a href="https://twitter.com/kibakobako/status/1179333912587378688/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">撫子</span><a href="https://twitter.com/po3515/status/1167811409624760321/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>


                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EF3V6keXUAEyqF3.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">鵺</span><a href="https://twitter.com/kibakobako/status/1179333912587378688/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">撫子</span><a href="https://twitter.com/po3515/status/1167811409624760321/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EF3V6keXUAEyqF3.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">鵺</span><a href="https://twitter.com/kibakobako/status/1179333912587378688/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>

                <div class="col-md-3 photo">
                    <a href=":large" target="_blank"><img src="https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb" class="img-thumbnail"></a>
                    <br /><span class="glyphicon glyphicon-user">撫子</span><a href="https://twitter.com/po3515/status/1167811409624760321/photo/1"><span class="glyphicon glyphicon-zoom-in">もっと見る</span></a>
                </div>


            </div>
        </div>
    </div>
    <script>
        var BoxOpened = "";
        var ImgOpened = "";
        var Counter = 0;
        var ImgFound = 0;
        var Source = "#boxcard";

/*        var ImgSource = [
             "https://pbs.twimg.com/media/EF3V6keXUAEyqF3.jpg:thumb",,
             "https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb",
             "https://pbs.twimg.com/media/EE_d-UVU4AEgVzk.png:thumb",
             "https://pbs.twimg.com/media/EEOZ2XTU8AEZOem.jpg:thumb"
        ];
        */
        var ImgSource = [
             ["https://pbs.twimg.com/media/EF3V6keXUAEyqF3.jpg:thumb", "p1"],
             ["https://pbs.twimg.com/media/EDTl5GjUUAQGdEc.jpg:thumb", "p2"],
             ["https://pbs.twimg.com/media/EE_d-UVU4AEgVzk.png:thumb", "p1"],
             ["https://pbs.twimg.com/media/EEOZ2XTU8AEZOem.jpg:thumb", "p2"],
        ];
        function RandomFunction(MaxValue, MinValue) {
        		return Math.round(Math.random() * (MaxValue - MinValue) + MinValue);
        	}
        function ShuffleImages() {
        	var ImgAll = $(Source).children();
        	var ImgThis = $(Source + " div:first-child");
        	var ImgArr = new Array();
        	for (var i = 0; i < ImgAll.length; i++) {
        		ImgArr[i] = $("#" + ImgThis.attr("id") + " img").attr("src");
        		ImgThis = ImgThis.next();
        	}

        		ImgThis = $(Source + " div:first-child");

        	for (var z = 0; z < ImgAll.length; z++) {
        	var RandomNumber = RandomFunction(0, ImgArr.length - 1);

        		$("#" + ImgThis.attr("id") + " img").attr("src", ImgArr[RandomNumber]);
        		ImgArr.splice(RandomNumber, 1);
        		ImgThis = ImgThis.next();
        	}
        }

        function ResetGame() {
        	ShuffleImages();
        	$(Source + " div img").hide();
        	$(Source + " div").css("visibility", "visible");
        	Counter = 0;
        	$("#success").remove();
        	$("#counter").html("" + Counter);
        	BoxOpened = "";
        	ImgOpened = "";
        	ImgFound = 0;
        	return false;
        }

        function OpenCard() {
        	var id = $(this).attr("id");
          var card_id = $(this).children("id");
        	if ($("#" + id + " img").is(":hidden")) {
        		$(Source + " div").unbind("click", OpenCard);

        		$("#" + id + " img").slideDown('fast');

        		if (ImgOpened == "") {
        			BoxOpened = id;
              BOXOpenedCard = card_id
//        			ImgOpened = $("#" + id + " img").attr("src");
        			ImgOpened = $("#" + id + " img").attr("id");
              console.log("1:"+ImgOpened);
        			setTimeout(function() {
        				$(Source + " div").bind("click", OpenCard)
        			}, 300);
        		} else {
//        			CurrentOpened = $("#" + id + " img").attr("src");
                CurrentOpened = $("#" + id + " img").attr("id");
                console.log("1:"+CurrentOpened);

        			if (ImgOpened != CurrentOpened) {
        				setTimeout(function() {
        					$("#" + id + " img").slideUp('fast');
        					$("#" + BoxOpened + " img").slideUp('fast');
        					BoxOpened = "";
        					ImgOpened = "";
        				}, 500);
        			} else {
        				//$("#" + id + " img").parent().css("visibility", "hidden");
        				//$("#" + BoxOpened + " img").parent().css("visibility", "hidden");
        				ImgFound++;
        				BoxOpened = "";
        				ImgOpened = "";
        			}
        			setTimeout(function() {
        				$(Source + " div").bind("click", OpenCard)
        			}, 400);
        		}
        		Counter++;
        		$("#counter").html("" + Counter);

        		if (ImgFound == ImgSource.length) {
        			$("#counter").prepend('<span id="success">全部見つけましたねおめでとう！ </span>');
                    $("#reward").append("<h2>マヨイガ★ラブハート: 魔法の鍵をゲットした！</h2><p>「マヨラブ★オープンハート」と叫ぶと、ラキラ光ってマヨラブ戦士に変身する鍵の色によってコスチュームの色が変わる<br /><small>鍵の提供: マヨイガの里・主催者様</small>");
                    $("#reward").append($("<img>").attr("src", "https://pbs.twimg.com/media/EEZqtSqUUAEXJAb.jpg:orig").attr("width",298).attr("height",282).attr("class", "center-block"));
        		}
        	}
        }

        $(function() {
          $.each(ImgSource, function(i, val) {
            $(Source).append("<div id=card" + i + " class=img-rounded><img src=" + val[0] + " id=" + val[1] + ">");
          });
/*
        for (var y = 1; y < 3 ; y++) {
        	$.each(ImgSource, function(i, val) {
        		$(Source).append("<div id=card" + y + i + " class=img-rounded><img src=" + val + " />");
        	});
        }
        */
        	$(Source + " div").click(OpenCard);
        	ShuffleImages();
        });
</script>

        <div class="col-md-12">
            <footer>コンテンツ内容は、マヨイガの里に参加しているユーザーに属します。</footer>
        </div>

    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <!--<script src="./js/masonry.pkgd.min.js" charset="utf-8"></script>-->

  </body>
</html>
